{% extends "boilerplate.html" %}
{% block title %}Login{% endblock %}
{% block body_class %}auth-background{% endblock %}
{% block content %}
<link rel="stylesheet" href="/static/signin.css">
<div class="container d-flex justify-content-center align-items-center">
  <div class="auth-wrap w-100" style="max-width: 480px;">
    <div class="auth-card">
      <div class="auth-form p-4 p-md-5">
        <div class="auth-title">
          <h3 class="fw-bold mb-1">Sign In</h3>
          <p class="auth-subtitle mb-0">Welcome back! Please enter your details</p>
        </div>

        {% if error %}
        <div class="alert alert-danger text-center">{{ error }}</div>
        {% endif %}

        <form method="post" action="/login" novalidate>
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input id="email" name="email" type="email" class="mt-0 form-control" placeholder="you@example.com"
              required />
          </div>

          <div class="mb-3 position-relative">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
              <input id="password" name="password" type="password" class="mt-0 form-control" required />
              <button type="button" class="mt-0 btn btn-outline-secondary" id="togglePassword" tabindex="-1">
                üëÅ
              </button>
            </div>
            <div class="mt-1">
              <a href="/forgot-password" class="text-decoration-none small">Forgot your password?</a>
            </div>
          </div>

          <button class="btn btn-primary w-100 py-2" type="submit">Sign In</button>
        </form>

        <!-- Divider -->
        <div class="d-flex align-items-center mt-3">
          <hr class="flex-grow-1" />
          <span class="px-2 text-muted">OR</span>
          <hr class="flex-grow-1" />
        </div>

        <!-- Google Sign-In -->
        <div class="text-center">
          <button class="gsi-material-button" onclick="window.location.href='/login/google'">
            <div class="gsi-material-button-icon">
              <img src="https://developers.google.com/identity/images/g-logo.png" width="18" alt="Google logo" />
            </div>
            <span class="gsi-material-button-contents">Sign in with Google</span>
          </button>
        </div>

        <div class="auth-bottom mt-3">
          Don‚Äôt have an account? <a href="/signup">Sign up</a>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  const toggleBtn = document.getElementById("togglePassword");
  const pwdField = document.getElementById("password");
  toggleBtn.addEventListener("click", () => {
    const type = pwdField.type === "password" ? "text" : "password";
    pwdField.type = type;
    toggleBtn.textContent = type === "password" ? "üëÅ" : "üôà";
  });
</script>

{% endblock %}